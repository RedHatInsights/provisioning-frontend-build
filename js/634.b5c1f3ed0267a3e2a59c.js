(self.webpackChunkprovisioning_frontend=self.webpackChunkprovisioning_frontend||[]).push([[634],{32171:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ln});var r=n(87462),a=n(70885),o=n(45987),c=n(45697),i=n.n(c),l=n(90154),u=n(93264),s=n.n(u),p=n(88767),d=new p.QueryClient({defaultOptions:{queries:{staleTime:5e3}}});const f=function(e){var t=e.children;return s().createElement(p.QueryClientProvider,{client:d},t)};var m=n(64572),b=n(33806);const g={chosenSource:void 0,chosenNumOfInstances:1,chosenInstanceType:void 0,uploadedKey:!1,chosenRegion:void 0,chosenImageID:void 0,sshPublicName:"",sshPublicKey:"",chosenSshKeyId:void 0,chosenSshKeyName:null,provider:void 0};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,b.fH)((function(e){return(0,u.useState)(y(y({},g),e))})),O=h.Provider,E=h.useTracked,S="sources",w="pubkeys",P="image_region",j="templates",I=n(15861),k=n(64687),D=n.n(k),_=n(65564),T=n.n(_),Z=n(58061),C=function(e){return"/api/provisioning/v1/".concat(e)},x=function(e){return"/api/image-builder/v1/".concat(e)},L=function(e,t){return e===Z.kD?C("instance_types/".concat(e,"?region=").concat(t,"&zone=1")):C("instance_types/".concat(e,"?region=").concat(t))},z=function(){var e=(0,I.Z)(D().mark((function e(t){var n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("sources?provider=".concat(t)));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,I.Z)(D().mark((function e(t){var n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("sources/".concat(t,"/upload_info")));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,I.Z)(D().mark((function e(){var t,n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("pubkeys"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,I.Z)(D().mark((function e(t,n){var r,a,o;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=L(n,t),e.next=3,T().get(r);case 3:return a=e.sent,o=a.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(e){return function(){var t=(0,I.Z)(D().mark((function t(n){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T().post(C("reservations/".concat(e)),n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){var e=(0,I.Z)(D().mark((function e(t){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T().post(C("pubkeys"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,I.Z)(D().mark((function e(t){var n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("reservations/".concat(t)));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,I.Z)(D().mark((function e(t){var n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(x("composes/".concat(t,"/clones")));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,I.Z)(D().mark((function e(t){var n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(x("clones/".concat(t)));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,I.Z)(D().mark((function e(t,n){var r,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("reservations/".concat(n,"/").concat(t)));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=(0,I.Z)(D().mark((function e(t,n){var r,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(C("sources/".concat(t,"/launch_templates?region=").concat(n)));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.refetch,r=void 0!==n&&n,a=(0,p.useQuery)([S,e],(function(){return z(e)}),{enabled:!!e,refetchInterval:r&&1e4}),o=a.error,c=a.isLoading,i=a.data;return{error:o,isLoading:c,sources:i}},U=function(e,t){var n=t.refetch,r=Q(e,{refetch:n}),a=r.sources,o=r.isLoading,c=r.error,i=(0,p.useQueries)((null==a?void 0:a.map((function(e){return{queryKey:["source_upload_info",e.id],queryFn:function(){return R(e.id)},retry:1}})))||[]),l=o||i.some((function(e){return e.isLoading})),u=[];return!o&&(null==a||a.forEach((function(e,t){i[t].isSuccess&&u.push(W(W({},i[t].data),e))}))),{isLoading:l,error:c,infos:u}},J=function(e){switch(e.provider){case Z.Zz:return function(t){var n,r;return(null===(n=e.sourceIDs)||void 0===n?void 0:n.includes(t.id))||(null===(r=e.accountIDs)||void 0===r?void 0:r.includes(t.aws.account_id))};case Z.kD:return function(t){var n,r,a;return(null===(n=e.uploadOptions)||void 0===n?void 0:n.source_id)===t.id||(null===(r=t.azure)||void 0===r?void 0:r.subscription_id)===(null===(a=e.uploadOptions)||void 0===a?void 0:a.subscription_id)};case Z.go:return function(){return!0};default:return function(t){var n;return null===(n=e.sourceIDs)||void 0===n?void 0:n.includes(t.id)}}},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.refetch,r=void 0!==n&&n,a=t.onSuccess,o=void 0===a?function(){}:a,c=U(e.provider,{refetch:r}),i=c.isLoading,l=c.error,u=c.infos,p=e.isTesting?u:null==u?void 0:u.filter(J(e));return s().useEffect((function(){i||l||o(p)}),[i]),{isLoading:i,error:l,sources:p||[]}},$=function(e){var t=e.isOpen,n=e.onConfirm,r=e.onCancel;return s().createElement(l.Modal,{ouiaId:"app-confirm-modal",id:"app-confirm-modal","aria-label":"confirm cancel of launch modal",variant:l.ModalVariant.small,title:"Exit instance launching?",isOpen:t,onClose:r,actions:[s().createElement(l.Button,{key:"exit",variant:"primary",onClick:n,ouiaId:"btn-exit-confirm"},"Exit"),s().createElement(l.Button,{key:"stay",variant:"link",onClick:r},"Stay")],titleIconVariant:"warning"},"All inputs will be discarded.")};$.propTypes={isOpen:i().bool.isRequired,onConfirm:i().func.isRequired,onCancel:i().func.isRequired};const Y=$;var ee=n(80159),te=n(20777),ne=n(84564),re=n(50470),ae=n(42982),oe=function(e){switch(e){case Z.Zz:return"us-east-1";case Z.go:return"us-central1-a";case Z.kD:return"eastus";default:throw new Error("Unrecognized provider was entered: ".concat(e))}},ce=function(e){switch(e){case Z.Zz:return"Amazon cloud";case Z.kD:return"Azure";case Z.go:return"Google cloud";default:throw new Error("Unrecognized provider was entered: ".concat(e))}},ie=["id"];function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(e){var t=e.provider,n=e.currentRegion,r=e.composeID,c=e.onChange,i=s().useState(!1),u=(0,a.Z)(i,2),d=u[0],f=u[1],m=(0,p.useQuery)([P,r],(function(){return B(r)}),{select:function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{id:e.id,region:e.request.region}}))}}),b=m.isError,g=m.isLoading,v=m.data,y=(0,p.useQueries)((null==v?void 0:v.map((function(e){return{queryKey:[P,e.id],queryFn:function(){return G(e.id)}}})))||[]),h=y.some((function(e){return e.isLoading})),O=[{region:t&&oe(t),id:r}];if(y.length&&y.every((function(e){return!1===e.isLoading}))){var E=null==y?void 0:y.map((function(e){return null==e?void 0:e.data}));null==E||E.forEach((function(e,t){v[t]=ue(ue({},v[t]),null==e?void 0:e.options)}));var S=null==v?void 0:v.filter((function(e,t){return"success"===E[t].status}));O.push.apply(O,(0,ae.Z)(S))}return b?s().createElement(s().Fragment,null,s().createElement(l.Alert,{ouiaId:"regions_alert",variant:"warning",isInline:!0,title:"There are problems fetching image's regions"}),s().createElement(l.Select,{ouiaId:"regions_empty",isDisabled:!0,placeholderText:"No regions have been found"})):g||h?s().createElement(l.Spinner,{isSVG:!0,size:"sm","aria-label":"loading available regions"}):s().createElement(l.Select,{ouiaId:"select_regions",variant:"typeahead","aria-label":"Select region",label:"Select region",maxHeight:"450px",isOpen:d,selections:n,onToggle:function(e){f(e)},onSelect:function(e,t){var n=O.find((function(e){return e.region===t})),r=n.id,a=(0,o.Z)(n,ie);c(ue({region:t,imageID:r},a)),f(!1)},isDisabled:!Z.xM.includes(t)},O.map((function(e){var t=e.id,n=e.region;return s().createElement(l.SelectOption,{"aria-label":"Region item",key:t,value:n})})))};se.propTypes={provider:i().oneOf([Z.Zz,Z.kD,Z.go]).isRequired,composeID:i().string.isRequired,onChange:i().func.isRequired,currentRegion:i().string};const pe=se;var de=i().shape({name:i().string,id:i().string,provider:i().oneOf([Z.Zz,Z.kD,Z.go]),architecture:i().string,sourceIDs:i().arrayOf(i().string),accountIDs:i().arrayOf(i().string)}).isRequired,fe=function(e){var t,n=e.image;return s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement("p",null,"or"),s().createElement("br",null),s().createElement(l.StackItem,null,s().createElement("strong",null," Launch with Google Cloud Console ")),s().createElement(l.StackItem,{isFilled:!0},s().createElement(l.ClipboardCopy,{className:"custom-clipboard-copy",hoverTip:"Copy",clickTip:"Copied",ouiaId:"gcp-launch-instance",variant:"expansion",isReadOnly:!0},(t=n.uploadStatus.options,"gcloud compute instances create ".concat(t.image_name,"-instance --image-project ").concat(t.project_id," --image ").concat(t.image_name)))))};fe.propTypes={image:de};const me=fe;function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ge=function(e){var t,n,r=e.image,o=r.uploadStatus||{options:{}},c=r.uploadOptions||{},i=s().useState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({imageID:r.id},o.options)),u=(0,a.Z)(i,2),p=u[0],d=u[1];switch(r.provider){case Z.Zz:n="Launch with AWS console",t="https://console.aws.amazon.com/ec2/v2/home?region="+p.region+"#LaunchInstanceWizard:ami="+p.ami;break;case Z.kD:n="View uploaded image",t="https://portal.azure.com/#@"+c.tenant_id+"/resource/subscriptions/"+c.subscription_id+"/resourceGroups/"+c.resource_group+"/providers/Microsoft.Compute/images/"+o.options.image_name;break;case Z.go:break;default:throw new Error("Steps requested for unknown provider: ".concat(r.provider))}return s().createElement(l.Stack,null,r.provider===Z.go?s().createElement(me,{image:r}):s().createElement(l.StackItem,null,s().createElement(l.Button,{component:"a",variant:"link",icon:s().createElement(re.ZP,null),iconPosition:"right",target:"_blank",href:t},n)),r.provider===Z.Zz&&s().createElement(l.StackItem,null,s().createElement(l.Bullseye,null,s().createElement(pe,{composeID:r.id,provider:r.provider,currentRegion:p.region,onChange:function(e){console.log(e),d(e)}}))))};ge.propTypes={image:de};const ve=ge;var ye=["isLoading"],he=s().createElement(s().Fragment,null,s().createElement("p",null,"There are no sources available for use with this image."),s().createElement("p",null,"Create a source, grant an existing source launch functionality,"),s().createElement("p",null,"or launch directly from the cloud provider console.")),Oe=function(){return s().createElement(l.EmptyState,null,s().createElement(l.EmptyStateIcon,{variant:"container",component:l.Spinner}),s().createElement(l.Title,{size:"lg",headingLevel:"h4"},"Loading available Sources"))},Ee=function(e){var t=e.error,n=e.image;return s().createElement(l.EmptyState,null,s().createElement(l.EmptyStateIcon,{icon:t?ne.ZP:te.ZP}),s().createElement(l.Title,{headingLevel:"h4",size:"lg"},t?"Failed to fetch available sources.":"No sources available"),s().createElement(l.EmptyStateBody,null,(null==t?void 0:t.message)||he),s().createElement(l.Button,{variant:"primary",component:"a",target:"_blank",href:"/preview/settings/sources/new"},"Create Source"),s().createElement(l.EmptyStateSecondaryActions,null,s().createElement(ve,{image:n})))};Ee.propTypes={error:i().string,image:de};var Se=function(e){var t=e.isLoading,n=(0,o.Z)(e,ye);return t?s().createElement(Oe,null):s().createElement(Ee,n)};Se.propTypes={error:i().string,isLoading:i().bool,image:de};const we=Se;var Pe=n(34046);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=function(e){var t=e.setValidation,n=e.image,r=E(),o=(0,a.Z)(r,2),c=o[0].chosenSource,i=o[1],u=s().useState(!1),p=(0,a.Z)(u,2),d=p[0],f=p[1],m=s().useState(null),b=(0,a.Z)(m,2),g=b[0],v=b[1],y=function(e,t){return{id:e,toString:function(){return t},compareTo:function(t){return t.id===e}}},h=X(n,{onSuccess:function(e){c?(v(y(c,e.find((function(e){return e.id===c})).name)),t("success")):1===e.length&&(v(y(e[0].id,e[0].name)),i((function(t){return Ie(Ie({},t),{},{chosenSource:e[0].id})})),t("success"))}}),O=h.isLoading,S=h.error,w=h.sources;return S?(console.warn("Failed to fetch sources list"),s().createElement(s().Fragment,null,s().createElement(l.Alert,{ouiaId:"select_account_alert",variant:"warning",isInline:!0,title:"There are problems fetching accounts"}),s().createElement(l.Select,{ouiaId:"select_account_empty",isDisabled:!0,placeholderText:"No accounts found","aria-label":"Select account"}))):O?s().createElement(l.Spinner,{isSVG:!0,size:"sm","aria-label":"Loading accounts"}):s().createElement(l.Select,{ouiaId:"select_account",isOpen:d,onToggle:function(e){return f(e)},selections:g,onSelect:function(e,n,r){r?(v(null),i((function(e){return Ie(Ie({},e),{},{chosenSource:null})})),t("error")):(v(n),i((function(e){return Ie(Ie({},e),{},{chosenSource:n.id})})),t("success")),f(!1)},placeholderText:"Select account","aria-label":"Select account"},w&&w.map((function(e){var t=e.name,n=e.id;return s().createElement(l.SelectOption,{"aria-label":"Source account",key:n,value:y(n,t)})})))};ke.propTypes={setValidation:i().func.isRequired,image:de};const De=ke;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ze=function(){var e,t=E(),n=(0,a.Z)(t,2),r=n[0],o=r.chosenInstanceType,c=r.chosenNumOfInstances,i=r.chosenRegion,u=r.chosenSource,d=r.provider,f=n[1],m=(0,p.useQuery)(["instanceTypes",i],(function(){return A(i,d)}),{enabled:!!i&&!!u&&!!o}).data,b=null==m||null===(e=m.find((function(e){return e.name===o})))||void 0===e?void 0:e.vcpus;return s().createElement(s().Fragment,null,b*c>32&&s().createElement(l.Alert,{"data-testid":"vcpu_limit_exceeded_alert",ouiaId:"vcpu_limit_exceeded_not_supported_alert",variant:"warning",isInline:!0,title:"Warning: Launching many vCPUs which might exceed service quota limit."}),s().createElement(l.NumberInput,{max:45,min:1,value:c,onMinus:function(){var e=c-1;f((function(t){return Te(Te({},t),{},{chosenNumOfInstances:e})}))},onChange:function(e){var t=Math.floor(Number(e.target.value));t>45&&(t=45),t<1&&(t=1),f((function(e){return Te(Te({},e),{},{chosenNumOfInstances:t})}))},onPlus:function(){var e=c+1;f((function(t){return Te(Te({},t),{},{chosenNumOfInstances:e})}))},inputName:"instances",inputAriaLabel:"number of instances",minusBtnAriaLabel:"instances-minus",plusBtnAriaLabel:"instances-plus"}))};function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){var t=e.setValidation,n=e.architecture,o=E(),c=(0,a.Z)(o,2),i=c[0],u=i.chosenInstanceType,d=i.chosenRegion,f=i.chosenSource,m=i.provider,b=c[1],g=s().useState(!1),v=(0,a.Z)(g,2),y=v[0],h=v[1],O=s().useState(5),S=(0,a.Z)(O,2),w=S[0],P=S[1],j=s().useState(null),I=(0,a.Z)(j,2),k=I[0],D=I[1],_=s().useState(""),T=(0,a.Z)(_,2),Z=T[0],C=T[1],x=s().useState(!0),L=(0,a.Z)(x,2),z=L[0],R=L[1],N=(0,p.useQuery)(["instanceTypes",d],(function(){return A(d,m)}),{staleTime:3e5,select:function(e){return e.filter((function(e){return e.architecture===n}))},enabled:!!d&&!!f}),V=N.isLoading,F=N.error,q=N.data;if(!f||""===f)return s().createElement(s().Fragment,null,s().createElement(l.TextInput,{ouiaId:"instance_type_readonly",className:"pf-c-form-control",readOnly:!0,type:"text",value:"Select account to load instances",id:"input-readonly","aria-label":"Select instance type - disabled"}));if(F)return console.warn("Failed to fetch instance types list"),s().createElement(s().Fragment,null,s().createElement(l.Alert,{ouiaId:"instance_type_alert",variant:"warning",isInline:!0,title:"There are problems fetching instance types"}),s().createElement(l.Select,{ouiaId:"instance_type_empty",isDisabled:!0,placeholderText:"No instance types found",toggleAriaLabel:"Select instance type"}));if(V)return s().createElement(l.Spinner,{isSVG:!0,size:"sm","aria-label":"Contents of the small example"});var B=k||q;return s().createElement(s().Fragment,null,!z&&s().createElement(l.Alert,{"data-testid":"unsupported_type_alert",ouiaId:"instance_type_not_supported_alert",variant:"warning",isInline:!0,title:"Warning: The selected specification does not meet minimum requirements for this image."}),s().createElement(l.Select,(0,r.Z)({ouiaId:"select_instance_type",variant:"typeahead",typeAheadAriaLabel:"Selected instance type",toggleAriaLabel:"Select instance type",placeholderText:"Select instance type",maxHeight:"450px",isOpen:y,selections:u,onToggle:function(e){h(e)},onSelect:function(e,n,r){if(r)t("error"),R(!0),b((function(e){return xe(xe({},e),{},{chosenInstanceType:null})})),h(!1);else{var a=q.find((function(e){return n===e.name}));R(a.supported),b((function(e){return xe(xe({},e),{},{chosenInstanceType:n})})),t("success"),h(!1)}},onFilter:function(e,t){var n=t.replace(/\\+$/,"");Z!==n&&(P(5),C(n),D(q.filter((function(e){return e.name.includes(n)}))))}},w<(null==B?void 0:B.length)&&{loadingVariant:{text:"View more (".concat(B.length-w,")"),onClick:function(){return P(w+5)}}}),function(e,t){var n,r;return t<(null===(n=e)||void 0===n?void 0:n.length)&&(e=e.slice(0,t)),null===(r=e)||void 0===r?void 0:r.map((function(e,t){return s().createElement(l.SelectOption,{"aria-label":"Instance Type ".concat(e.name),key:t,description:"".concat(e.cores||"only vCPU"," cores |\n          ").concat(e.vcpus," vCPU |\n          ").concat((parseFloat(e.memory_mib)/1024).toFixed(1)," GiB memory |\n          ").concat(e.storage_gb>0?e.storage_gb+" GB storage | ":"EBS only | ","\n          ").concat(e.architecture),value:e.name})}))}(B,w)))};Le.propTypes={setValidation:i().func.isRequired,architecture:i().string.isRequired};const ze=Le;function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ae=function(){var e,t=E(),n=(0,a.Z)(t,2),r=n[0],o=r.chosenSource,c=r.chosenRegion,i=r.chosenTemplate,u=n[1],d=s().useState(!1),f=(0,a.Z)(d,2),m=f[0],b=f[1],g=(0,p.useQuery)([j,"".concat(c,"-").concat(o)],(function(){return H(o,c)}),{enabled:!!o&&!!c}),v=g.error,y=g.isLoading,h=g.data,O=i&&(null===(e=h.find((function(e){return e.id===i})))||void 0===e?void 0:e.name);return v?s().createElement(s().Fragment,null,s().createElement(l.Alert,{ouiaId:"select_template_alert",variant:"warning",isInline:!0,title:"There are problems fetching templates"}),s().createElement(l.Select,{ouiaId:"select_template_empty",isDisabled:!0,placeholderText:"No templates found","aria-label":"Select template"})):y?s().createElement(l.Spinner,{isSVG:!0,size:"sm","aria-label":"Loading templates"}):s().createElement(l.Select,{ouiaId:"select_templates",isOpen:m,onToggle:function(e){return b(e)},selections:O,onSelect:function(e,t,n){n||u((function(e){var n;return Ne(Ne({},e),{},{chosenTemplate:null===(n=h.find((function(e){return e.name===t})))||void 0===n?void 0:n.id})})),b(!1)},placeholderText:"Select templates","aria-label":"Select templates",clearSelectionsAriaLabel:"clear template selection",onClear:function(){u((function(e){return Ne(Ne({},e),{},{chosenTemplate:void 0})}))}},h&&h.map((function(e){var t=e.name,n=e.id;return s().createElement(l.SelectOption,{"aria-label":"template option",key:n,value:t})})))};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=function(e){var t=e.setStepValidated,n=e.image,r=E(),o=(0,a.Z)(r,2),c=o[0],i=c.chosenSource,u=c.chosenRegion,p=c.chosenInstanceType,d=o[1],f=s().useState({sources:i?"success":"default",types:p?"success":"default"}),m=(0,a.Z)(f,2),b=m[0],g=m[1];return s().useEffect((function(){var e=Object.values(b).some((function(e){return"success"!==e}));t(!e)}),[b]),s().createElement(l.Form,null,s().createElement(l.Title,{ouiaId:"account_custom_title",headingLevel:"h1",size:"xl"},"Account and customizations | Amazon"),s().createElement(l.Text,{ouiaId:"account_custom_description"},"Configure instances that will run on your AWS. All the instances will launch with the same configuration."),s().createElement(l.FormGroup,{label:"Select account",validated:b.sources,helperTextInvalid:"Please pick a value",isRequired:!0,fieldId:"aws-select-source"},s().createElement(De,{image:n,setValidation:function(e){return g((function(t){return Fe(Fe({},t),{},{sources:e})}))}})),s().createElement(l.FormGroup,{label:"Select region",isRequired:!0,fieldId:"aws-select-region",labelIcon:s().createElement(l.Popover,{bodyContent:"Select available geographical region"},s().createElement(l.Button,{ouiaId:"region_help",type:"button","aria-label":"More info for regions field",onClick:function(e){return e.preventDefault()},"aria-describedby":"aws-select-region",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(pe,{provider:Z.Zz,onChange:function(e){var t=e.region,n=e.imageID;d((function(e){return Fe(Fe({},e),{},{chosenRegion:t,chosenImageID:n})}))},composeID:n.id,currentRegion:u})),s().createElement(l.FormGroup,{label:"Select template",fieldId:"aws-select-template",labelIcon:s().createElement(l.Popover,{bodyContent:s().createElement("span",null,"Launch templates contains the configuration information to launch an instance. Note that instance type and public SSH key will be still required and will override template values. For further information and for creating launch templates"," ",s().createElement("a",{rel:"noreferrer",target:"_blank",href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-launch-templates.html"},"click here"))},s().createElement(l.Button,{ouiaId:"template_help",type:"button","aria-label":"template field info",onClick:function(e){return e.preventDefault()},"aria-describedby":"aws-select-template",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(Ae,null)),s().createElement(l.FormGroup,{label:"Select instance type",isRequired:!0,helperTextInvalid:"Please pick a value",fieldId:"aws-select-instance-types",labelIcon:s().createElement(l.Popover,{bodyContent:"Select AWS instance type based on your computing, memory, networking, or storage needs"},s().createElement(l.Button,{ouiaId:"instance_type_help",type:"button","aria-label":"More info for instance types field",onClick:function(e){return e.preventDefault()},"aria-describedby":"aws-select-instance-types",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(ze,{architecture:n.architecture,setValidation:function(e){return g((function(t){return Fe(Fe({},t),{},{types:e})}))}})),s().createElement(l.FormGroup,{label:"Count",isRequired:!0,fieldId:"aws-select-instance-counter",labelIcon:s().createElement(l.Popover,{bodyContent:"Specify the number of AWS instances to be launched"},s().createElement(l.Button,{ouiaId:"instance_count_help",type:"button","aria-label":"More info for instance counter field",onClick:function(e){return e.preventDefault()},"aria-describedby":"aws-select-instance-counter",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(Ze,null)))};qe.propTypes={setStepValidated:i().func.isRequired,image:de};const Be=qe;function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function(e){var t=e.setStepValidated,n=e.image,r=E(),o=(0,a.Z)(r,2),c=o[0],i=o[1],u=s().useState({sources:c.chosenSource?"success":"default",types:c.chosenInstanceType?"success":"default"}),p=(0,a.Z)(u,2),d=p[0],f=p[1];return s().useEffect((function(){var e=Object.values(d).some((function(e){return"success"!==e}));t(!e)}),[d]),s().createElement(l.Form,null,s().createElement(l.Title,{ouiaId:"account_custom_title",headingLevel:"h1",size:"xl"},"Account and customizations | Google cloud"),s().createElement(l.Text,{ouiaId:"account_custom_description"},"Configure instances that will run on your Google cloud. All the instances will launch with the same configuration."),s().createElement(l.FormGroup,{label:"Select account",validated:d.sources,helperTextInvalid:"Please pick a value",isRequired:!0,fieldId:"gcp-select-source"},s().createElement(De,{image:n,setValidation:function(e){return f((function(t){return Ke(Ke({},t),{},{sources:e})}))}})),s().createElement(l.FormGroup,{label:"Select zone",isRequired:!0,fieldId:"gcp-select-zone",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"GCP zones")},s().createElement(l.Button,{ouiaId:"zone_help",type:"button","aria-label":"More info for zones field",onClick:function(e){return e.preventDefault()},"aria-describedby":"gcp-select-zone",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(pe,{provider:Z.go,onChange:function(e){var t=e.region,n=e.imageID;i((function(e){return Ke(Ke({},e),{},{chosenRegion:t,chosenImageID:n})}))},composeID:n.id,currentRegion:c.chosenRegion})),s().createElement(l.FormGroup,{label:"Select template",fieldId:"gcp-select-template",labelIcon:s().createElement(l.Popover,{bodyContent:s().createElement("span",null,"Launch templates contains the configuration information to launch an instance. Note that machine type and public SSH key will be still required and will override template values. For further information and for creating launch templates"," ",s().createElement("a",{rel:"noreferrer",target:"_blank",href:"https://cloud.google.com/compute/docs/instance-templates"},"click here"))},s().createElement(l.Button,{ouiaId:"template_help",type:"button","aria-label":"template field info",onClick:function(e){return e.preventDefault()},"aria-describedby":"gcp-select-template",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(Ae,null)),s().createElement(l.FormGroup,{label:"Select machine type",isRequired:!0,helperTextInvalid:"Please pick a value",fieldId:"gcp-select-machine-types",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"GCP machine types")},s().createElement(l.Button,{ouiaId:"machine_type_help",type:"button","aria-label":"More info for machine types field",onClick:function(e){return e.preventDefault()},"aria-describedby":"gcp-select-machine-types",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(ze,{architecture:n.architecture,setValidation:function(e){return f((function(t){return Ke(Ke({},t),{},{types:e})}))}})),s().createElement(l.FormGroup,{label:"Count",isRequired:!0,fieldId:"gcp-select-instance-counter",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"Number of GCP instances")},s().createElement(l.Button,{ouiaId:"instance_count_help",type:"button","aria-label":"More info for instance counter field",onClick:function(e){return e.preventDefault()},"aria-describedby":"gcp-select-instance-counter",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(Ze,null)))};He.propTypes={setStepValidated:i().func.isRequired,image:de};const Me=He;function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e){var t=e.setStepValidated,n=e.image,r=E(),o=(0,a.Z)(r,2),c=o[0],i=o[1],u=s().useState({sources:c.chosenSource?"success":"default",types:c.chosenInstanceType?"success":"default"}),p=(0,a.Z)(u,2),d=p[0],f=p[1];return s().useEffect((function(){var e=Object.values(d).some((function(e){return"success"!==e}));t(!e)}),[d]),s().createElement(l.Form,null,s().createElement(l.Title,{ouiaId:"account_custom_title",headingLevel:"h1",size:"xl"},"Account and customizations | Azure"),s().createElement(l.Text,{ouiaId:"account_custom_description"},"Configure instances that will run on your Azure cloud. All the instances will launch with the same configuration."),s().createElement(l.FormGroup,{label:"Select account",validated:d.sources,helperTextInvalid:"Please pick a value",isRequired:!0,fieldId:"azure-select-source"},s().createElement(De,{image:n,setValidation:function(e){return f((function(t){return Qe(Qe({},t),{},{sources:e})}))}})),s().createElement(l.FormGroup,{label:"Select location",isRequired:!0,fieldId:"azure-select-location",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"Azure locations")},s().createElement(l.Button,{ouiaId:"location_help",type:"button","aria-label":"More info for location field",onClick:function(e){return e.preventDefault()},"aria-describedby":"azure-select-location",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(pe,{provider:Z.kD,currentRegion:c.chosenRegion,onChange:function(e){var t=e.region,n=e.imageID;i((function(e){return Qe(Qe({},e),{},{chosenRegion:t,chosenImageID:n})}))},composeID:n.id})),s().createElement(l.FormGroup,{label:"Select instance size",isRequired:!0,helperTextInvalid:"Please pick a value",fieldId:"azure-select-instance-size",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"Azure instance sizes")},s().createElement(l.Button,{ouiaId:"machine_type_help",type:"button","aria-label":"More info for instance size field",onClick:function(e){return e.preventDefault()},"aria-describedby":"azure-select-instance-size",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(ze,{architecture:n.architecture,setValidation:function(e){return f((function(t){return Qe(Qe({},t),{},{types:e})}))}})),s().createElement(l.FormGroup,{label:"Count",isRequired:!0,fieldId:"azure-select-instance-counter",labelIcon:s().createElement(l.Popover,{headerContent:s().createElement("div",null,"Number of Azure instances")},s().createElement(l.Button,{ouiaId:"instance_count_help",type:"button","aria-label":"More info for instance counter field",onClick:function(e){return e.preventDefault()},"aria-describedby":"azure-select-instance-counter",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(Ze,null)))};Ue.propTypes={setStepValidated:i().func.isRequired,image:de};const Je=Ue;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function(e){var t=e.setStepValidated,n=e.image,r=E(),o=(0,a.Z)(r,2)[1],c=n.provider;switch(s().useEffect((function(){c&&o((function(e){return $e($e({},e),{},{provider:c,chosenRegion:oe(c),chosenImageID:n.id})}))}),[c,o]),c){case Z.Zz:return s().createElement(Be,{setStepValidated:t,image:n});case Z.kD:return s().createElement(Je,{setStepValidated:t,image:n});case Z.go:return s().createElement(Me,{setStepValidated:t,image:n});default:throw new Error("Can not render AccountCustomizations for unrecognized provider: ".concat(c))}};Ye.propTypes={setStepValidated:i().func.isRequired,image:de};const et=Ye;var tt=[500,600,700,800,900,1e3,1200,1400,1600,1800,2e3,3e3,4e3,5e3,1e4,15e3,2e4,25e3,3e4,6e4,6e4],nt=[{name:"Create reservation",description:"Submit requested data"},{name:"Transfer keys",description:"Uploading public key to AWS"},{name:"Launch instance(s)",description:"Call AWS API for launching instance(s)"},{name:"Instance description",description:"Fetch instance(s) descriptions"}],rt=[{name:"Create reservation",description:"Submit data of requested instances"},{name:"Ensure resource group",description:"Ensure resource group is present on Azure account"},{name:"Launch instance(s)",description:"Launch defined instance(s) on Azure"}],at=[{name:"Create reservation",description:"Submit requested data"},{name:"Launch instance(s)",description:"Call Google API"},{name:"Fetch instance(s) description",description:"Fetch instance(s) descriptions"}],ot=[{name:"New SSH key",description:"Creating new SSH public key resource"}],ct=[Z.Zz,Z.kD,Z.go],it=function(e){switch(e){case Z.Zz:return nt;case Z.kD:return rt;case Z.go:return at;default:throw new Error("Steps requested for unknown provider: ".concat(e))}},lt=function(e){switch(e){case Z.Zz:return"instance_type";case Z.kD:return"instance_size";case Z.go:return"machine_type";default:return"instance_type"}},ut=function(e){switch(e){case Z.Zz:return"region";case Z.go:return"zone";default:return"region"}},st=function(e){var t,n=e.imageName,r=E(),o=(0,a.Z)(r,1)[0],c=o.chosenRegion,i=o.chosenSshKeyName,u=o.uploadedKey,d=o.chosenInstanceType,f=o.chosenNumOfInstances,m=o.chosenSource,b=o.sshPublicName,g=o.provider,v=o.chosenTemplate,y=Q(g).sources,h=(0,p.useQuery)([j,"".concat(c,"-").concat(m)],(function(){return H(m,c)}),{enabled:!!m&&!!c}).data,O=s().useState(!0),S=(0,a.Z)(O,2),w=S[0],P=S[1],I=null==h||null===(t=h.find((function(e){return e.id===v})))||void 0===t?void 0:t.name,k=ut(g).charAt(0).toUpperCase()+ut(g).slice(1),D=lt(g).replace("_"," "),_=D.charAt(0).toUpperCase()+D.slice(1);return s().createElement(l.ExpandableSection,{toggleText:g&&ce(g),onToggle:function(e){P(e)},isExpanded:w,isIndented:!0},s().createElement(l.DescriptionList,{isHorizontal:!0},s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,"Image"),s().createElement(l.DescriptionListDescription,null,n)),s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,"Account"),s().createElement(l.DescriptionListDescription,null,null==y?void 0:y.find((function(e){return e.id===m})).name)),s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,k),s().createElement(l.DescriptionListDescription,null,c)),s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,_),s().createElement(l.DescriptionListDescription,null,d)),s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,"Count"),s().createElement(l.DescriptionListDescription,null,f)),s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,u?"New SSH key":"Existing SSH key"),s().createElement(l.DescriptionListDescription,null,u?b:i)),v&&s().createElement(l.DescriptionListGroup,null,s().createElement(l.DescriptionListTerm,null,"Launch template"),s().createElement(l.DescriptionListDescription,null,I))))};st.propTypes={imageName:i().string.isRequired};const pt=st;var dt=function(e){var t=e.imageName;return s().createElement("div",{className:"pf-c-form"},s().createElement(l.Title,{ouiaId:"review_details_title",headingLevel:"h1"},"Review details"),s().createElement(l.Text,{ouiaId:"review_details_description"},"Review the information below and then click ",s().createElement("b",null,"Launch")," to finish the process."),s().createElement(pt,{imageName:t}))};dt.propTypes={imageName:i().string.isRequired};const ft=dt;var mt=(0,m.Z)({},Z.kD,["ssh-ed25519"]);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt=function(e,t){return{id:e,toString:function(){return t},compareTo:function(t){return t.id==e}}},yt=function(e){var t=e.setStepValidated,n=E(),r=(0,a.Z)(n,2),o=r[0],c=r[1],i=s().useState(!1),u=(0,a.Z)(i,2),d=u[0],f=u[1],m=s().useState(o.chosenSshKeyId?vt(o.chosenSshKeyId,o.chosenSshKeyName):null),b=(0,a.Z)(m,2),g=b[0],v=b[1],y=s().useState(!0),h=(0,a.Z)(y,2),O=h[0],S=h[1];s().useEffect((function(){var e,n,r,a,c=null==k||null===(e=k.find((function(e){return e.id===(null==g?void 0:g.id)})))||void 0===e?void 0:e.type;n=o.provider,r=c,(null===(a=mt[n])||void 0===a?void 0:a.includes(r))?(t(!1),S(!1)):t(!!g)}),[g]);var P=(0,p.useQuery)(w,N),j=P.isLoading,I=P.isError,k=P.data;return j?s().createElement(l.Spinner,{isSVG:!0,size:"sm","aria-label":"Loading saved SSH keys"}):I||k&&k.length<1?s().createElement(s().Fragment,null,I&&s().createElement(l.Alert,{ouiaId:"pubkey_alert",variant:"warning",isInline:!0,title:"There are problems fetching saved SSH keys"}),s().createElement(l.Select,{ouiaId:"pubkey_empty",isDisabled:!0,placeholderText:"No SSH key found","aria-label":"Select public key"})):s().createElement(l.FormGroup,{helperTextInvalid:"Key format is not support in ".concat(ce(o.provider)),label:"Select public key",validated:!O&&"error"},s().createElement(l.Select,{ouiaId:"select_pubkey",onToggle:function(e){return f(e)},onSelect:function(e,t){c((function(e){return gt(gt({},e),{},{chosenSshKeyId:t.id,chosenSshKeyName:t.toString()})})),v(t),f(!1)},isOpen:d,selections:g,placeholderText:"Select public key...","aria-label":"Select public key",validated:!O&&"error"},k.map((function(e){var t=e.id,n=e.name;return s().createElement(l.SelectOption,{"aria-label":"Public key ".concat(n),key:t,value:vt(t,n)})}))))};yt.propTypes={setStepValidated:i().func.isRequired};const ht=yt;function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St=function(e){var t=e.setStepValidated,n=function(e){var t,n=new RegExp("^(ssh|ecdsa)");return(null===(t=mt[p])||void 0===t||!t.some((function(t){return null==e?void 0:e.startsWith(t)})))&&n.test(e)},r=E(),o=(0,a.Z)(r,2),c=o[0],i=c.sshPublicName,u=c.sshPublicKey,p=c.provider,d=o[1],f=s().useState(),b=(0,a.Z)(f,2),g=b[0],v=b[1],y=s().useState({sshKeyBody:n(u)?"success":"default",sshKeyName:i?"success":"default"}),h=(0,a.Z)(y,2),O=h[0],S=h[1],w=s().useState(i),P=(0,a.Z)(w,2),j=P[0],I=P[1],k=s().useState(u),D=(0,a.Z)(k,2),_=D[0],T=D[1];s().useEffect((function(){var e=Object.values(O).some((function(e){return"success"!==e}));t(!e)}),[O]);var Z=function(e,t){return S((function(n){return Et(Et({},n),{},(0,m.Z)({},e,t))}))};return s().createElement(l.FormGroup,{isStack:!0},s().createElement(l.FormGroup,{validated:O.sshKeyName,helperTextInvalid:"Name is required",label:"Name",isRequired:!0,fieldId:"ssh-name"},s().createElement(l.TextInput,{ouiaId:"new_pubkey_name",validated:O.sshKeyName,value:j,id:"public-key-name",onChange:function(e){d((function(t){return Et(Et({},t),{},{sshPublicName:e})})),I(e)},onBlur:function(){0!==j.length?Z("sshKeyName","success"):Z("sshKeyName","error")},type:"text"})),s().createElement(l.FormGroup,{helperTextInvalid:"Public key format is invalid or unsupported",label:"SSH public key",isRequired:!0,fieldId:"ssh-file",validated:O.sshKeyBody,labelIcon:Object.keys(mt).includes(p)&&s().createElement(l.Popover,{bodyContent:s().createElement("span",null,"Azure does not support ed25519 keys, please use RSA key instead. See",s().createElement("a",{rel:"noreferrer",target:"_blank",href:"https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/ed25519-ssh-keys"},"further information"))},s().createElement(l.Button,{ouiaId:"pubkey_help",type:"button","aria-label":"More info for pubkeys format",onClick:function(e){return e.preventDefault()},"aria-describedby":"public key content",className:"pf-c-form__group-label-help",variant:"plain"},s().createElement(Pe.ZP,{noVerticalAlign:!0})))},s().createElement(l.FileUpload,{id:"public-key-value",onDataChange:function(e){n(e)?(d((function(t){return Et(Et({},t),{},{sshPublicKey:e})})),T(e),Z("sshKeyBody","success")):Z("sshKeyBody","error")},allowEditingUploadedText:!0,onTextChange:function(e){d((function(t){return Et(Et({},t),{},{sshPublicKey:e})})),T(e)},onTextAreaBlur:function(){Z("sshKeyBody",""===_?"default":n(_)?"success":"error")},type:"text",value:_,validated:O.sshKeyBody,onReadStarted:function(){v(!0)},onReadFinished:function(){v(!1)},onReadFailed:function(){d((function(e){return Et(Et({},e),{},{sshPublicName:"<Failed to load the file>"})})),Z("sshKeyBody","error")},onClearClick:function(){d((function(e){return Et(Et({},e),{},{sshPublicName:void 0,sshPublicKey:void 0})})),T(""),Z("sshKeyBody","default")},isLoading:g,filenamePlaceholder:"Drag a file here"})))};St.propTypes={setStepValidated:i().func.isRequired};const wt=St;function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It="newKey",kt=function(e){var t=e.setStepValidated,n=E(),r=(0,a.Z)(n,2),o=r[0],c=r[1],i=(0,p.useQuery)(w,N),u=i.isError,d=i.data,f=s().useState(!1),m=(0,a.Z)(f,2),b=m[0],g=m[1],v=function(e){c((function(t){return jt(jt({},t),{},{uploadedKey:It===e})}))},y=function(e,t){v(t.currentTarget.value)};return s().useEffect((function(){(u||(null==d?void 0:d.length)<1)&&(g(!0),v(It))}),[u,d]),s().createElement(l.Form,{className:"pubkeys"},s().createElement(l.Title,{ouiaId:"pubkey_title",headingLevel:"h1"},"SSH key authentication"),s().createElement(l.Text,{ouiaId:"pubkey_description"},"Establish secure, reliable communication and strong encryption to protect data."),s().createElement(l.FormGroup,{role:"radiogroup",isStack:!0,isRequired:!0,label:"Select a method to add SSH public key"},s().createElement(l.Radio,{id:"existing-pubkey-radio",ouiaId:"pubkey_radio",isChecked:!o.uploadedKey,isDisabled:b,name:"ssh-keys-radio",value:"existKey",onChange:y,label:"Select existing SSH public key","data-testid":"existing-pubkey-radio",body:(!o.uploadedKey||b)&&s().createElement(ht,{setStepValidated:t})}),s().createElement(l.Radio,{id:"upload-pubkey-radio",ouiaId:"new_pubkey_radio",isChecked:o.uploadedKey,name:"ssh-keys-radio",value:It,onChange:y,label:"Add and save a new SSH public key",description:"Newly added key will be automatically saved.","data-testid":"upload-pubkey-radio",body:o.uploadedKey&&s().createElement(wt,{setStepValidated:t})})))};kt.propTypes={setStepValidated:i().func.isRequired};const Dt=kt;var _t=n(16948),Tt=n(41942),Zt=n(35451);function Ct(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lt=D().mark((function e(t){var n,r,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ct(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}));var zt=n(51249),Rt=n(58240),Nt=n(76771),At=n(14334),Vt=n(3134),Ft=n(24793),qt=function(e,t,n){switch(t){case Z.Zz:return"https://console.aws.amazon.com/ec2/home?region=".concat(n,"#InstanceDetails:instanceId=").concat(e);case Z.kD:return"https://portal.azure.com/#@rhdevcloudops.onmicrosoft.com/resource".concat(e,"/overview");case Z.go:return"https://console.cloud.google.com/compute/instancesDetail/zones/".concat(n,"/instances/").concat(e);default:return null}};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}],Ht=function(e){var t=e.reservationID,n=e.provider,r=e.region,o=s().useState({perPage:5,page:1,startIdx:0,endIdx:5}),c=(0,a.Z)(o,2),i=c[0],u=c[1],d=(0,p.useQuery)(["launchInfo",t],(function(){return K(t,n)}),{select:function(e){return null==e?void 0:e.instances}}).data,f=null==d?void 0:d.slice(i.startIdx,i.endIdx),m=null==f?void 0:f.some((function(e){var t,n;return(null===(t=e.detail)||void 0===t||null===(n=t.public_dns)||void 0===n?void 0:n.length)>0}));return s().createElement(l.Card,{style:{position:"relative",marginLeft:"-20%",marginRight:"-20%"}},s().createElement(l.Pagination,{itemCount:(null==d?void 0:d.length)||0,page:i.page,onSetPage:function(e,t,n,r,a){u({perPage:n,page:t,startIdx:r,endIdx:a})},perPage:i.perPage,onPerPageSelect:function(e,t,n,r,a){u((function(e){return Gt(Gt({},e),{},{perPage:t,page:n,startIdx:r,endIdx:a})}))},perPageOptions:Kt,isCompact:!0,ouiaId:"instances-pagination"}),s().createElement(zt.X,{ouiaId:"instances table","aria-label":"instances description table",variant:"compact"},s().createElement(Rt.h,null,s().createElement(Nt.Tr,null,s().createElement(At.Th,null,"ID"),m&&s().createElement(At.Th,null,"DNS"),s().createElement(At.Th,null,"SSH command"))),s().createElement(Vt.p,null,null==f?void 0:f.map((function(e){var t=e.instance_id,a=e.detail;return s().createElement(Nt.Tr,{key:t},s().createElement(Ft.Td,{"aria-label":"instance id",dataLabel:"ID"},s().createElement(l.Button,{variant:"link",icon:s().createElement(re.ZP,null),iconPosition:"right",isInline:!0,component:"a",rel:"noreferrer",target:"_blank",href:qt(t,n,r)},function(e,t){return t===Z.kD?e.split("/").slice(-1):e}(t,n))),m&&s().createElement(Ft.Td,{"aria-label":"instance dns",dataLabel:"DNS"},null!=a&&a.public_dns?s().createElement(l.ClipboardCopy,{isReadOnly:!0,hoverTip:"Copy DNS",clickTip:"DNS was copied!",variant:"expansion"},null==a?void 0:a.public_dns):"N/A"),s().createElement(Ft.Td,{"aria-label":"ssh command",dataLabel:"SSH"},null!=a&&a.public_ipv4?s().createElement(l.ClipboardCopy,{isReadOnly:!0,hoverTip:"Copy SSH command",clickTip:"SSH was copied!",variant:"expansion"},"ssh ".concat(function(e){switch(e){case Z.Zz:return"ec2-user";case Z.kD:return"azureuser";case Z.go:return"gcp-user"}}(n),"@").concat(null==a?void 0:a.public_ipv4)):"N/A"))})))))};Ht.propTypes={provider:i().string.isRequired,region:i().string.isRequired,reservationID:i().number.isRequired};const Mt=Ht;function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut=function(e){var t=e.setLaunchSuccess,n=s().useState([]),r=(0,a.Z)(n,2),o=r[0],c=r[1],i=s().useState(),u=(0,a.Z)(i,2),d=u[0],f=u[1],b=s().useState(),g=(0,a.Z)(b,2),v=g[0],y=g[1],h=s().useState(0),O=(0,a.Z)(h,2),S=O[0],w=O[1],P=s().useState(0),j=(0,a.Z)(P,2),I=j[0],k=j[1],D=s().useState(),_=(0,a.Z)(D,2),T=_[0],Z=_[1],C=E(),x=(0,a.Z)(C,1)[0],L=x.chosenSource,z=x.chosenInstanceType,R=x.chosenNumOfInstances,N=x.chosenRegion,A=x.sshPublicName,B=x.sshPublicKey,G=x.chosenSshKeyId,K=x.uploadedKey,H=x.chosenImageID,M=x.provider,W=x.chosenTemplate,Q=function(e){var t=s().useRef(null),n=s().useRef(e),r=s().useState(),o=(0,a.Z)(r,2),c=o[0],i=o[1];return s().useEffect((function(){t.current=Lt(n.current)}),[]),{nextInterval:function(){var e=t.current.next().value;return i(void 0!==e&&e),void 0!==e&&e},currentInterval:c}}(tt),U=Q.nextInterval,J=Q.currentInterval,X=(0,p.useMutation)(V(M),{onSuccess:function(e){var t;oe(),Z(null==e||null===(t=e.data)||void 0===t?void 0:t.reservation_id)}}),$=X.mutate,Y=X.error,ee=function(){var e;return Qt((e={source_id:L},(0,m.Z)(e,lt(M),z),(0,m.Z)(e,"amount",R),(0,m.Z)(e,"image_id",H),(0,m.Z)(e,ut(M),N),(0,m.Z)(e,"pubkey_id",G),e),W&&{launch_template_id:W})};s().useEffect((function(){V&&(K?(c(ot.concat(it(M))),ne({name:A,body:B})):(c(it(M)),$(ee())))}),[V,c,K]);var te=(0,p.useMutation)(F,{onSuccess:function(e){var t;oe(),$(Qt(Qt({},ee()),{},{pubkey_id:null==e||null===(t=e.data)||void 0===t?void 0:t.id}))}}),ne=te.mutate,re=te.error,ae=(0,p.useQuery)(["reservation",T],(function(){return q(T)}),{enabled:!!T&&!d,staleTime:0,refetchInterval:function(e){return!(null!=e&&e.success||null!=e&&e.error)&&J},onSuccess:function(e){I<e.step&&!e.error&&(k((function(e){return e+1})),oe()),(null==e||!e.success)&&U(),e.success&&t()},refetchIntervalInBackground:!0}).data;s().useEffect((function(){if(!1===J&&y("The launch progress is slower than expected, but we are still on it.\n         It is safe to close this window and check your ".concat(ce(M)," console later")),Y||re||null!=ae&&ae.error){var e,t,n,r,a=null==Y||null===(e=Y.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg,o=null==re||null===(n=re.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.msg;f(a||o||(null==ae?void 0:ae.error))}}),[Y,re,null==ae?void 0:ae.error,J]);var oe=function(){return w((function(e){return e+1}))};return s().createElement(l.WizardContextConsumer,null,(function(e){var t=e.goToStepById,n=e.onClose;return s().createElement(l.EmptyState,{variant:"large"},s().createElement(l.EmptyStateIcon,{color:(null==ae?void 0:ae.success)?"#3E8635":null,icon:null!=ae&&ae.success?Zt.ZP:_t.ZP}),s().createElement(l.Title,{headingLevel:"h4",size:"lg",ouiaId:"launch-status"},null!=ae&&ae.success?"System(s) launched successfully":"Launching system(s)"),T&&s().createElement(l.Text,{component:"small",ouiaId:"launch-id"},"launch ID: ".concat(T)),s().createElement(l.EmptyStateBody,null,!(null!=ae&&ae.success)&&s().createElement(l.ProgressStepper,{isCenterAligned:!0},o.map((function(e,t){var n=e.name,r=e.description,a=function(e,t,n,r){return e<t?"success":e===t&&n?"danger":e===t&&r?"warning":e===t?"info":e>t?"pending":void 0}(t,S,d,v);return s().createElement(l.ProgressStep,{variant:a,id:n,key:n,icon:t>S?s().createElement(Tt.ZP,null):void 0,isCurrent:t===S,description:r,titleId:n,"aria-label":"step ".concat(n," ").concat(a),popoverRender:(d||v)&&t===S?function(e){return s().createElement(l.Popover,{"aria-label":"".concat(n," error message"),headerContent:d?"Error":"Warning",bodyContent:d||v,reference:e,position:"right"})}:void 0},n)})))),(null==ae?void 0:ae.success)&&ct.includes(M)&&s().createElement(Mt,{provider:M,region:N,reservationID:T}),d&&s().createElement(l.Button,{id:"wizard-provisioning-failed-edit-button",onClick:function(){return t(1)},variant:"primary"},"Edit"),s().createElement(l.EmptyStateSecondaryActions,null,s().createElement(l.Button,{variant:"link",isDisabled:!d&&S<2,onClick:n},"Close")))}))};Ut.propTypes={setLaunchSuccess:i().func.isRequired};const Jt=Ut;function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yt={1:"account",4:"sshkey",5:"review"},en=function(e){return Yt[e]};const tn=function(){return u.createElement(l.WizardFooter,null,u.createElement(l.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,r=e.onBack,a=e.onClose,o=void 0===t.enableNext||t.enableNext;return u.createElement(u.Fragment,null,u.createElement(l.Button,{id:"wizard-provisioning-".concat(en(t.id),"-next-button"),variant:l.ButtonVariant.primary,type:"submit",onClick:n,isDisabled:!o},t.nextButtonText||"Next"),!t.hideBackButton&&u.createElement(l.Button,{id:"wizard-provisioning-".concat(en(t.id),"-back-button"),variant:l.ButtonVariant.secondary,onClick:r,isDisabled:1==t.id},"Back"),!t.hideCancelButton&&u.createElement("div",{className:ee.Z.wizardFooterCancel},u.createElement(l.Button,{variant:l.ButtonVariant.link,onClick:a},"Cancel")))})))};var nn=n(28721),rn=["onClose","image"],an={sshStep:!1,awsStep:!1},on=function(e){var t,n,c,i,p,d,f=e.onClose,m=e.image,b=(0,o.Z)(e,rn),g=s().useState(1),v=(0,a.Z)(g,2),y=v[0],h=v[1],O=s().useState(an),E=(0,a.Z)(O,2),S=E[0],w=E[1],P=s().useState(!1),j=(0,a.Z)(P,2),I=j[0],k=j[1],D=s().useState(),_=(0,a.Z)(D,2),Z=_[0],C=_[1],x=X(m,{refetch:y<=2}),L=x.isLoading,z=x.error,R=x.sources;t=function(){return T().defaults.headers.common["X-Correlation-Id"]=(0,nn.Z)(),function(){return delete T().defaults.headers.common["X-Correlation-Id"]}},n=(0,u.useRef)(),c=(0,u.useRef)(!1),i=(0,u.useRef)(!1),p=(0,u.useState)(0),d=(0,a.Z)(p,2)[1],c.current&&(i.current=!0),(0,u.useEffect)((function(){return c.current||(n.current=t(),c.current=!0),d((function(e){return e+1})),function(){i.current&&n.current&&n.current()}}),[]);var N=function(){k(!1),h(1),w(an),f()},A=function(e){return e.availableSources.length>0?(n=(t=e).stepIdReached,r=t.image,a=t.stepValidation,o=t.setStepValidation,c=t.setLaunchSuccess,[{name:"Account and customization",steps:[{name:ce(r.provider),id:1,enableNext:a.awsStep,component:s().createElement(et,{image:r,setStepValidated:function(e){return o((function(t){return $t($t({},t),{},{awsStep:e})}))}}),canJumpTo:n>=1}]},{name:"SSH key authentication",id:4,component:s().createElement(Dt,{setStepValidated:function(e){return o((function(t){return $t($t({},t),{},{sshStep:e})}))}}),canJumpTo:n>=4,enableNext:a.sshStep},{name:"Review details",id:5,component:s().createElement(ft,{imageName:r.name}),canJumpTo:n>=5,nextButtonText:"Launch"},{name:"Finish Progress",id:6,component:s().createElement(Jt,{setLaunchSuccess:function(){return c(!0)},imageID:r.id}),isFinishedStep:!0}]):function(e){var t=e.image,n=e.isLoading,r=e.sourcesError;return[{name:"Define source",id:1,component:s().createElement(we,{image:t,isLoading:n,error:r}),isFinishedStep:!0}]}(e);var t,n,r,a,o,c}({sourcesError:z,isLoading:L,availableSources:R,stepIdReached:y,image:m,stepValidation:S,setStepValidation:w,setLaunchSuccess:C});return s().createElement(s().Fragment,null,s().createElement(l.Wizard,(0,r.Z)({},b,{title:"Launch",description:"Launch image ".concat(m.name),steps:A,onClose:function(){y>=5&&!Z?k(!0):N()},onNext:function(e,t){var n=e.id,r=e.name,a=t.prevId,o=t.prevName;console.debug("current id: ".concat(n,", current name: ").concat(r,", previous id: ").concat(a,", previous name: ").concat(o)),h((function(e){return e<n?n:e}))},className:"provisioning",footer:s().createElement(tn,null)})),s().createElement(Y,{isOpen:I,onConfirm:N,onCancel:function(){return k(!1)}}))},cn=function(e){return s().createElement(O,null,s().createElement(f,null,s().createElement(on,e)))};on.propTypes={onClose:i().func,image:de},cn.propTypes=on.propTypes;const ln=cn},58061:(e,t,n)=>{"use strict";n.d(t,{Zz:()=>r,go:()=>o,kD:()=>a,xM:()=>c});var r="aws",a="azure",o="gcp",c=[r]},11452:()=>{},34946:()=>{},32857:()=>{},28992:()=>{},30187:()=>{},21626:()=>{},66822:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},49854:()=>{},40209:()=>{},74543:()=>{}}]);
//# sourceMappingURL=../sourcemaps/634.7c473a55ef19db97cf77ea96a1ca294c.js.map